<!-- TODO: traslate placeholders... --> <div class="container users-page"> <div ng-show="signedIn() && currentUserCanRead()"> <form class="form-horizontal" ng-hide="printMode || addMode || editMode"> <div class="form-group" style="margin-bottom: 0"> <div class="row"> <div class="col-xs-3" title="Add new user"> <button type="submit" class="btn btn-primary" ng-show="!(addMode || editMode)" ng-click="addUser()"> <i class="glyphicon glyphicon-plus"></i>&nbsp;<span translate>New user</span> </button> </div> <div class="col-xs-4"> </div> <div class="col-xs-5" ng-attr-title="{{ 'Filter users' | translate }}"> <div class="right-inner-addon"> <i class="glyphicon glyphicon-search"></i> <input type="text" ng-model="search" class="form-control form-control-search"> </div> </div> </div> </div> </form> <div ng-hide="printMode || addMode || editMode" class="scrollable" spring="footer"> <table ng-table="tableParams" class="table"> <tr> <th> <span ng-click="orderby = '-username'" translate>Username</span> <a ng-click="orderby = 'username'"><small><i ng-show="orderby === '-username'" class="glyphicon glyphicon-chevron-up"></i></small></a> <a ng-click="orderby = '-username'"><small><i ng-show="orderby === 'username'" class="glyphicon glyphicon-chevron-down"></i></small></a>  <th class="phone-hide"> <span ng-click="orderby = '-email'" translate>Email</span> <a ng-click="orderby = 'email'"><small><i ng-show="orderby === '-email'" class="glyphicon glyphicon-chevron-up"></i></small></a> <a ng-click="orderby = '-email'"><small><i ng-show="orderby === 'email'" class="glyphicon glyphicon-chevron-down"></i></small></a>  <th> <span ng-click="orderby = '-provider'" translate>Provider</span> <a ng-click="orderby = 'provider'"><small><i ng-show="orderby === '-provider'" class="glyphicon glyphicon-chevron-up"></i></small></a> <a ng-click="orderby = '-provider'"><small><i ng-show="orderby === 'provider'" class="glyphicon glyphicon-chevron-down"></i></small></a>  <th class="tablet-hide"> <span translate>Id</span>  <th> <span translate>Avatar</span>  <th> <span translate>Roles</span>  <th> <!-- command buttons -->   <tr ng-repeat="user in users | orderByPriority | filter:search | orderBy: orderby" nong-if="!user.hasOwnProperty('deleted')"> <td ng-attr-title="{{ 'User name' | translate }}" sortable class="condensed"> {{ user.username }}  <td ng-attr-title="{{ 'Email' | translate }}" sortable class="condensed phone-hide"> {{ user.email }}  <td ng-attr-title="{{ 'Social connection provider' | translate }}" sortable class="condensed"> {{ user.provider }}  <td ng-attr-title="{{ 'Authentication id: ' + user.id }}" class="condensed tablet-hide"> <div ng-bind-html="user.id.length > 5 ? user.id.substr(0, 5) + '&hellip;' : user.id"></div>  <td ng-attr-title="{{ 'Avatar image' | translate }}" class="condensed"> <img class="pic-circular-small" ng-src="{{ user.imageUrl }}">  <td class="condensed"> <span ng-repeat="role in roles"> <span ng-class="{
                'role': true,
                'role-rw':  user.roles.users.read &&  user.roles.users.write,
                'role-r':   user.roles.users.read && !user.roles.users.write,
                'role-w':  !user.roles.users.read &&  user.roles.users.write,
                'role-nn': !user.roles.users.read && !user.roles.users.write
              }" ng-attr-title="{{ 'This user can ' + (
                 user.roles.users.read && user.roles.users.write ? 'read and write' :
                 user.roles.users.read && !user.roles.users.write ? 'read' :
                !user.roles.users.read && user.roles.users.write  ? 'write' :
                                                                    'not read nor write'
                ) + ' ' + role.desc | translate
              }}">{{ role.key }}</span> </span>  <td class="condensed"> <button ng-attr-title="{{'Edit user' | translate }}" class="btn btn-primary btn-xs glyphicon glyphicon-pencil" ng-disabled="!currentUserCanWrite()" ng-click="editUser(user)"></button> <button ng-attr-title="{{'Print user' | translate }}" class="btn btn-primary btn-xs glyphicon glyphicon-print" ng-click="preprintUser(user)"></button> <button ng-attr-title="{{ 'Delete user' | translate }}" class="btn btn-primary btn-xs glyphicon glyphicon-trash" ng-disabled="!currentUserCanWrite()" really-message="{{ 'Are you really sure to remove user' | translate }} <i>{{user.username}}</i> ?" really-click="deleteUser(user)"></button>   </table> </div> <form name="formAddEdit" ng-show="addMode || editMode" novalidate class="user form-horizontal"> <div class="row" title="User name"> <div class="col-xs-6 col-sm-2 col-lg-2"> <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span> <input type="text" name="name" class="form-control" ng-model="user.name" placeholder="Name" autofocus autocomplete="off" ng-required nocheck-not-empty check-user-name user-id="{{user.$id}}" key-escape="cancelUser()"> </div> </div> <div class="col-xs-1 small" ng-show="formAddEdit.name.$error.required"> <span class="glyphicon glyphicon-ok checkmark checkmark-ok"></span> </div> <div class="error-container" ng-show="formAddEdit.name.$invalid && formAddEditSubmitted"> <small class="error" ng-show="formAddEdit.name.$error.required" translate> A user name is required </small> <small class="error" ng-show="formAddEdit.name.$error.invalid" translate> User name is not valid </small> <small class="error" ng-show="formAddEdit.name.$error.taken" translate> This user name is already present </small> </div> </div> <div class="row" ng-attr-title="{{ 'User email address' | translate }}"> <div class="col-xs-12 col-sm-6 col-lg-4"> <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-envelope"></span></span> <input type="text" name="email" class="form-control" ng-model="user.email" placeholder="Email address" autocomplete="off" check-not-empty check-email key-escape="cancelUser()"> </div> </div> <div class="col-xs-1 small" ng-show="formAddEdit.email.$valid"> <span class="glyphicon glyphicon-ok checkmark checkmark-ok"></span> </div> <div class="error-container" ng-show="formAddEdit.email.$invalid && formAddEditSubmitted"> <small class="error" ng-show="formAddEdit.email.$error.required" translate> An email address is required </small> <small class="error" ng-show="formAddEdit.email.$error.invalid" translate> Email address is not valid </small> </div> </div> <div class="row" title="User street address"> <div class="col-xs-12 col-sm-8 col-lg-4"> <div class="input-group"> <span class="input-group-addon"><span class="glyphicon glyphicon-globe"></span></span> <input type="text" name="address" class="form-control" ng-model="user.address" ng-autocomplete="autocompleteAddressResult" details="autocompleteAddressDetails" options="autocompleteAddressOptions" placeholder="Address" check-not-empty key-escape="cancelUser()"> </div> </div> <div class="col-xs-1 small"> <span ng-show="formAddEdit.address.$valid" class="glyphicon glyphicon-ok" style="color: green; margin-top: 10px"></span> </div> <div class="error-container" ng-show="formAddEdit.address.$invalid && formAddEditSubmitted"> <small class="error" ng-show="formAddEdit.address.$error.required" translate> A street address is required </small> </div> </div> <div class="user row no-print" style="margin-top: 1.0em"> <div class="col"> <button type="submit" class="btn btn-primary" ng-click="submitUser(formAddEdit.$valid)"> <i class="glyphicon glyphicon-save"></i>&nbsp;<span translate>Save</span> </button> &emsp; <button type="text" class="btn btn-default" ng-click="cancelUser()"> <i class="glyphicon glyphicon-remove"></i>&nbsp;<span translate>cancel</span> </button> </div> </div> </form> </div> </div>